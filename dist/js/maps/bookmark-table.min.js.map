{"version":3,"names":[],"mappings":"","sources":["bookmark-table.js"],"sourcesContent":["'use strict'\n\nconst i18n\t\t= require( './i18n.min' )\n\nconst Store\t\t= require( 'electron-store' )\nconst store\t\t= new Store()\nconst psl \t\t= require( 'psl' )\nconst $\t\t\t= require( 'jquery' )\nconst dt\t\t= require( 'datatables.net' )( window, $ )\nconst keytable\t= require( 'datatables.net-keytable' )( window, $ )\n\nrequire( 'datatables.net-responsive' )( window, $ )\n\n\n\nmodule.exports.bookmarkTable = $('#bookmarks').DataTable({\n\t\n\tresponsive: true,\n\tresponsive: {\n\t\tdetails: false\n\t},\n\tkeys: {\n\t\ttabIndex: 1,\n\t\tblurable: true,\n\t\tkeys: [ \t32, // space\n\t\t\t\t\t38, // up\n\t\t\t\t\t40  // down\n\t\t]\n\t},\n\tscrollY: \t'calc(100vh - 59px)', // window height - header - footer\n\tpaging: \tfalse,\n\tdom: 'ltipr', // hide default search field\n\trowId:\n\t\tfunction(column) {\n\t\t\treturn 'row_' + column[0] // create unique row id form json ids\n\t\t},\n\tcolumnDefs:\n\t\t[\n\t\t\t{\n\t\t\t\ttitle: 'ID',\n\t\t\t\ttargets: [ 0 ],\n\t\t\t\tvisible: false,\n\t\t\t\tsearchable: false\n\t\t\t},\n\t\t\t{\n\t\t\t\ttitle: `<button id=\"toggle-info-panel\" title=\"${i18n.t('bookmarktable:header.details', 'Details')}\"></button>`,\n\t\t\t\ttargets: [ 1 ],\n\t\t\t\tclassName: 'details-control',\n\t\t\t\torderable: false,\n\t\t\t\tdata: null,\n\t\t\t\tdefaultContent: '',\n\t\t\t\twidth: '35px',\n\t\t\t\tresponsivePriority: 1\n\t\t\t},\n\t\t\t{\n\t\t\t\ttitle: i18n.t('bookmarktable:header.title', 'Title'),\n\t\t\t\ttargets: [ 2 ],\n\t\t\t\tresponsivePriority: 1,\n\t\t\t\twidth: '99%'\t\n\t\t\t},\n\t\t\t{\n\t\t\t\ttitle: i18n.t('bookmarktable:header.description', 'Description'),\n\t\t\t\ttargets: [ 3 ],\n\t\t\t\tvisible: false\n\t\t\t},\n\t\t\t{\n\t\t\t\ttitle: i18n.t('bookmarktable:header.url', 'Url'),\n\t\t\t\ttargets: [ 4 ],\n\t\t\t\tvisible: false\n\t\t\t},\n\t\t\t{\n\t\t\t\ttitle: 'unix added',\n\t\t\t\ttargets: [ 5 ],\n\t\t\t\tvisible: false\n\t\t\t},\n\t\t\t{\n\t\t\t\ttitle: i18n.t('bookmarktable:header.created', 'Created'),\n\t\t\t\ttargets: [ 6 ],\n\t\t\t\tvisible: store.get('tableColumns.created'),\n\t\t\t\tsearchable: false,\n\t\t\t\tiDataSort: 5,\n\t\t\t\tresponsivePriority: 1003\n\t\t\t},\n\t\t\t{\n\t\t\t\ttitle: 'unix modified',\n\t\t\t\ttargets: [ 7 ],\n\t\t\t\tvisible: false\n\t\t\t},\n\t\t\t{\n\t\t\t\ttitle: i18n.t('bookmarktable:header.modified', 'Modified'),\n\t\t\t\ttargets: [ 8 ],\n\t\t\t\tvisible: store.get('tableColumns.modified'),\n\t\t\t\tsearchable: false,\n\t\t\t\tiDataSort: 7,\n\t\t\t\tresponsivePriority: 1002\n\t\t\t},\n\t\t\t{\n\t\t\t\ttargets: [ 6, 8 ],\n\t\t\t\tclassName: 'date-column',\n\t\t\t\twidth: '135px'\n\t\t\t},\n\t\t\t{\n\t\t\t\ttitle: i18n.t('bookmarktable:header.tags', 'Tags'),\n\t\t\t\tclassName: 'tags-column dt-body-right padded-right',\n\t\t\t\ttargets: [ 9 ],\n\t\t\t\tvisible: store.get('tableColumns.tags'),\n\t\t\t\twidth: '50px',\n\t\t\t\tresponsivePriority: 1001\n\t\t\t}\n\t\t],\n\t\n\tlanguage: {\n\t\temptyTable: i18n.t('bookmarktable:footer.nodata', 'No data available'),\n\t\tzeroRecords: i18n.t('bookmarktable:footer.zero', '<span class=\"text\">No matching Bookmarks were found</span>'),\n\t\tinfo: i18n.t('bookmarktable:footer.info', '<span class=\"text\">Showing </span><b>_TOTAL_</b><span class=\"text\"> Bookmarks</span>'),\n\t\tinfoEmpty: i18n.t('bookmarktable:footer.empty', 'Showing <b>0</b><span class=\"text\"> to 0 of 0 Bookmarks</span>'),\n\t\tinfoFiltered: i18n.t('bookmarktable:footer.filtered', '<span class=\"filtered\">(filtered from _MAX_ Bookmarks)</span>')\n\t}\n})\n\n\n\nmodule.exports.detailsTable = function( data ) {\n\t\n\tlet desc = ( data[3] == '' ? '⋯' : data[3] ),\n\t\thostname = psl.get(extractHostname( data[4] )),\n\t\tfavicon\n\t\n\tif( hostname ) {\n\t\t\n\t\tfavicon = `<img class=\"favicon\" src=\"https://www.google.com/s2/favicons?domain=${hostname}\" width=\"16\" height=\"16\">&nbsp;`\n\t}\n\t\n\treturn `<div class=\"details-panel\">\n\t<div class=\"row\">\n\t\t<div class=\"label\">${i18n.t('bookmarktable:header.url', 'Url')}:</div>\n\t\t<div class=\"value nowrap\"><a id=\"url_${data[0]}\" href=\"${data[4]}\">${favicon}${data[4]}</a></div>\n\t</div>\n\t\n\t<div class=\"row\">\n\t\t<div class=\"label\">${i18n.t('bookmarktable:header.description', 'Description')}:</div>\n\t\t<div class=\"value wrap\">${desc}</div>\n\t</div>\n\t\n\t<div class=\"row\">\n\t\t<div class=\"label\">${i18n.t('bookmarktable:header.created', 'Created')}:</div>\n\t\t<div class=\"value\">${data[6]}</div>\n\t</div>\n\t\n\t<div class=\"row\">\n\t\t<div class=\"label\">${i18n.t('bookmarktable:header.modified', 'Modified')}:</div>\n\t\t<div class=\"value\">${data[8]}</div>\n\t</div>\n\t\n\t<div class=\"row\">\n\t\t<div class=\"label\">${i18n.t('bookmarktable:header.tags', 'Tags')}:</div>\n\t\t<div class=\"value\">${data[9]}</div>\n\t</div>\n\t\n\t<div class=\"buttons\">\n\t\t<button class=\"info-edit ui-button small\" data-id=\"${data[0]}\">${i18n.t('menu:bookmarks.edit', 'Edit Bookmark…')}</button>\n\t\t<button class=\"info-delete ui-button small\" data-id=\"${data[0]}\">${i18n.t('menu:bookmarks.delete', 'Delete Bookmark…')}</button>\n\t</div>\n</div>`\n}\n\n\n\n//note(dgmid): source: https://stackoverflow.com/questions/8498592/extract-hostname-name-from-string\n\nfunction extractHostname(url) {\n\t\n\tlet hostname\n\t\n\tif (url.indexOf(\"//\") > -1) {\n\t\t\n\t\thostname = url.split('/')[2]\n\t\n\t} else {\n\t\n\t\thostname = url.split('/')[0]\n\t}\n\t\n\thostname = hostname.split(':')[0]\n\thostname = hostname.split('?')[0]\n\t\n\treturn hostname\n}\n"],"file":"../bookmark-table.min.js"}