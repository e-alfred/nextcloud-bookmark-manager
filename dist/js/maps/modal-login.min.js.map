{"version":3,"names":[],"mappings":"","sources":["modal-login.js"],"sourcesContent":["'use strict'\n\nconst i18n \t\t\t= require( './i18n.min' )\n\nconst remote \t\t= require( 'electron' ).remote\nconst {ipcRenderer} = require( 'electron' )\nconst Store \t\t= require( 'electron-store' )\nconst store \t\t= new Store()\nconst Mousetrap \t= require( 'mousetrap' )\n\nconst $ \t\t\t= require( 'jquery' )\nconst jqueryI18next = require( 'jquery-i18next' )\n\njqueryI18next.init(i18n, $)\n\n\n//note(dgmid): log exceptions\n\nwindow.onerror = function( error, url, line ) {\n\t\n\tipcRenderer.send( 'error-in-render', {error, url, line} )\n}\n\n\n\n//note(dgmid): set lang & localize strings\n\n$('html').attr('lang', i18n.language)\n$('header').localize()\n$('label').localize()\n$('input').localize()\n$('button').localize()\n\n\n\n//note(dgmid): get login credentials\n\nconst \tserver \t\t= store.get( 'loginCredentials.server' ),\n\t\tusername \t= store.get( 'loginCredentials.username' ),\n\t\tpassword \t= store.get( 'loginCredentials.password' )\n\nif( server ) { $('input[name=\"server\"]').val( server ) }\n\n\n\n//note(dgmid): register kbd shortcut\nMousetrap.bind('command+.', function() {\n\t\n\tcloseModal()\n})\n\n\n\n//note(dgmid): close modal\n\nfunction closeModal() {\n\t\n\tconst modal = remote.getCurrentWindow()\n\tmodal.close()\n}\n\n\n\n$(document).ready(function() {\t\n\t\n\t//note(dgmid): set button states\n\t\n\tif( server ) {\n\t\t\n\t\tif( username && password ) {\n\t\t\t\n\t\t\tconsole.log('ALL THREE')\n\t\t\t\n\t\t\t$('#update').prop('disabled', true)\n\t\t\t$('#logout').prop('disabled', false)\n\t\t\n\t\t} else {\n\t\t\t\n\t\t\tconsole.log('ONLY SERVER')\n\t\t\t\n\t\t\t$('#update').prop('disabled', false)\n\t\t\t$('#logout').prop('disabled', true)\n\t\t}\n\t\t\n\t} else {\n\t\t\n\t\tconsole.log('NONE!')\n\t\t\n\t\t$('#update').prop('disabled', false)\n\t\t$('#logout').prop('disabled', true)\n\t}\n\t\n\t//note(dgmid): cancel modal\n\t\n\t$('#cancel').click( function() {\n\t\t\n\t\tcloseModal()\n\t})\n\t\n\t\n\t//note(dgmid): update data\n\t\n\t$('#modal-form').submit( function( e ) {\n\t\t\n\t\te.preventDefault()\n\t\t\n\t\tlet theserver = $('input[name=\"server\"]').val()\n\t\t\n\t\tstore.set( 'loginCredentials.server', theserver )\n\t\tipcRenderer.send( 'loginflow', theserver )\n\t})\n\t\n\t\n\t//note(dgmid): logout\n\t\n\t$('#logout').click( function() {\n\t\t\n\t\tstore.set( 'loginCredentials', {\n\t\t\t\n\t\t\tserver: '',\n\t\t\tusername: '',\n\t\t\tpassword: ''\n\t\t} )\n\t\t\n\t\tipcRenderer.send('refresh', 'refresh')\n\t\t\n\t\tcloseModal()\n\t})\n})\n"],"file":"../modal-login.min.js"}